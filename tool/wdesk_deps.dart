/**
 * Last pulled via pub deps -s compact from the Wdesk repo on 11/06/2018.
*/
final _private = {
  'admin_client': {'name': 'admin_client', 'version': '2.3.38'},
  'admin_frugal': {'name': 'admin_frugal', 'version': '0.0.17'},
  'app_intelligence': {'name': 'app_intelligence', 'version': '2.21.3'},
  'audit': {'name': 'audit', 'version': '1.46.0'},
  'basictracer_dart': {'name': 'basictracer_dart', 'version': '0.2.1'},
  'bigsky_rest_files': {'name': 'bigsky_rest_files', 'version': '0.3.30'},
  'bigsky_webdriver_utils': {
    'name': 'bigsky_webdriver_utils',
    'version': '2.3.0'
  },
  'browser_storage': {
    'name': 'browser_storage',
    'version': '0.1.6',
    'repository': 'https://github.com/Workiva/browser-storage'
  },
  'charts': {'name': 'charts', 'version': '1.51.0'},
  'comments_frugal': {'name': 'comments_frugal', 'version': '7.3.1'},
  'content_search_frugal': {
    'name': 'content_search_frugal',
    'version': '1.2.0'
  },
  'copy_frugal': {'name': 'copy_frugal', 'version': '0.1.13'},
  'copy_ui': {'name': 'copy_ui', 'version': '9.4.0'},
  'dart_medic': {'name': 'dart_medic', 'version': '1.3.6'},
  'dart_permissions_editor': {
    'name': 'dart_permissions_editor',
    'version': '4.1.25'
  },
  'dataset_service_api': {'name': 'dataset_service_api', 'version': '1.4.0'},
  'dataset_service_ui': {'name': 'dataset_service_ui', 'version': '1.2.0'},
  'datatables': {'name': 'datatables', 'version': '4.12.9'},
  'docmodel_frugal': {'name': 'docmodel_frugal', 'version': '0.9.0'},
  'drawing': {'name': 'drawing', 'version': '3.15.4'},
  'fastpath_api': {'name': 'fastpath_api', 'version': '1.0.1'},
  'file_services_sdk': {'name': 'file_services_sdk', 'version': '2.9.2'},
  'filing_orchestrator_api': {
    'name': 'filing_orchestrator_api',
    'version': '1.0.1'
  },
  'focus': {'name': 'focus', 'version': '1.0.7'},
  'frugal': {
    'name': 'frugal',
    'version': '2.23.0',
    'repository': 'https://github.com/Workiva/frugal'
  },
  'graph_api': {'name': 'graph_api', 'version': '16.56.0'},
  'graph_form_api': {'name': 'graph_form_api', 'version': '1.36.0'},
  'graph_ui': {'name': 'graph_ui', 'version': '4.17.0'},
  'grc_services_frugal': {'name': 'grc_services_frugal', 'version': '1.157.0'},
  'highcharts': {
    'name': 'highcharts',
    'version': '1.40.0',
    'repository': 'https://github.com/Workiva/highcharts'
  },
  'history_frugal': {'name': 'history_frugal', 'version': '0.4.1'},
  'home': {'name': 'home', 'version': '4.0.19'},
  'home_frugal': {'name': 'home_frugal', 'version': '2.1.0'},
  'iam_landing_page': {'name': 'iam_landing_page', 'version': '1.3.0'},
  'key_binder': {'name': 'key_binder', 'version': '1.10.3'},
  'licensing_api': {'name': 'licensing_api', 'version': '3.18.0'},
  'licensing_frugal': {'name': 'licensing_frugal', 'version': '4.70.0'},
  'linking_frugal': {'name': 'linking_frugal', 'version': '6.11.0'},
  'linking_sdk': {'name': 'linking_sdk', 'version': '2.2.1'},
  'markup': {'name': 'markup', 'version': '5.1.2'},
  'messaging_sdk': {
    'name': 'messaging_sdk',
    'version': '2.32.1',
    'repository': 'https://github.com/Workiva/messaging-sdk'
  },
  'opentracing_dart': {
    'name': 'opentracing_dart',
    'version': '0.1.6',
    'repository': 'https://github.com/Workiva/opentracing_dart'
  },
  'proofread_frugal': {'name': 'proofread_frugal', 'version': '1.1.3'},
  'rcal_api': {'name': 'rcal_api', 'version': '2.1.0'},
  'review_bar': {'name': 'review_bar', 'version': '0.3.4'},
  'semver_audit': {'name': 'semver_audit', 'version': '1.4.2'},
  'skaardb': {'name': 'skaardb', 'version': '16.180.0'},
  'sockjs_client': {
    'name': 'sockjs_client',
    'version': '0.3.5',
    'isGitDependency': true,
    'repository': 'https://github.com/Workiva/sockjs-dart-client'
  },
  'speedparser': {'name': 'speedparser', 'version': '2.2.2'},
  'sw_toolbox_dart': {'name': 'sw_toolbox_dart', 'version': '3.4.0'},
  'tasker': {'name': 'tasker', 'version': '0.6.47'},
  'text_doc_client': {'name': 'text_doc_client', 'version': '1.11.25'},
  'thrift': {
    'name': 'thrift',
    'version': '0.0.7',
    'repository': 'https://github.com/Workiva/thrift-dart'
  },
  'toolbars': {'name': 'toolbars', 'version': '0.8.9'},
  'tour': {'name': 'tour', 'version': '1.0.0'},
  'truss': {'name': 'truss', 'version': '3.41.1'},
  'undo_redo': {'name': 'undo_redo', 'version': '1.2.0'},
  'unscripted': {
    'name': 'unscripted',
    'version': '0.7.2',
    'repository': 'https://github.com/Workiva/unscripted'
  },
  'user_analytics': {'name': 'user_analytics', 'version': '3.138.0'},
  'vessel': {'name': 'vessel', 'version': '4.4.2'},
  'w_attachments': {'name': 'w_attachments', 'version': '2.9.0'},
  'w_clipboard': {'name': 'w_clipboard', 'version': '3.2.0'},
  'w_comments': {'name': 'w_comments', 'version': '7.16.1'},
  'w_context_menu': {'name': 'w_context_menu', 'version': '5.10.2'},
  'w_dashboard': {'name': 'w_dashboard', 'version': '0.72.2'},
  'w_dashboard_frugal': {'name': 'w_dashboard_frugal', 'version': '1.3.0'},
  'w_editor_dev_tools': {'name': 'w_editor_dev_tools', 'version': '1.0.0'},
  'w_editor_properties': {'name': 'w_editor_properties', 'version': '2.18.1'},
  'w_filing': {'name': 'w_filing', 'version': '1.0.12'},
  'w_filing_api': {'name': 'w_filing_api', 'version': '0.0.24'},
  'w_graph_client': {'name': 'w_graph_client', 'version': '3.22.0'},
  'w_history': {'name': 'w_history', 'version': '4.11.1'},
  'w_input_validation': {'name': 'w_input_validation', 'version': '1.3.0'},
  'w_link_properties_ui': {'name': 'w_link_properties_ui', 'version': '3.1.3'},
  'w_oauth2': {'name': 'w_oauth2', 'version': '3.3.2'},
  'w_outline': {'name': 'w_outline', 'version': '1.22.0'},
  'w_project': {'name': 'w_project', 'version': '0.1.42'},
  'w_router': {'name': 'w_router', 'version': '0.5.11'},
  'w_session': {'name': 'w_session', 'version': '6.30.1'},
  'w_sox': {'name': 'w_sox', 'version': '2.65.0'},
  'w_table': {'name': 'w_table', 'version': '29.68.0'},
  'w_test_tools': {'name': 'w_test_tools', 'version': '0.1.20'},
  'w_translate': {'name': 'w_translate', 'version': '3.6.9'},
  'w_user_color_module': {'name': 'w_user_color_module', 'version': '1.0.5'},
  'w_viewer': {'name': 'w_viewer', 'version': '9.1.0'},
  'w_virtual_components': {'name': 'w_virtual_components', 'version': '1.28.1'},
  'w_webdriver_utils': {'name': 'w_webdriver_utils', 'version': '2.45.1'},
  'wContent_frugal': {'name': 'wContent_frugal', 'version': '2.54.0'},
  'wdesk_login': {
    'name': 'wdesk_login',
    'version': '1.0.26',
    'repository': 'https://github.com/Workiva/wdesk_login'
  },
  'wdesk_sdk': {'name': 'wdesk_sdk', 'version': '2.110.2'},
  'web_skin': {'name': 'web_skin', 'version': '1.46.0'},
  'web_skin_dart': {'name': 'web_skin_dart', 'version': '2.26.1'},
  'workflow_client': {'name': 'workflow_client', 'version': '2.5.4'},
  'workflow_frugal': {'name': 'workflow_frugal', 'version': '0.84.0'},
  'workiva_scripts': {'name': 'workiva_scripts', 'version': '1.2.0'},
  'workspaces_api': {'name': 'workspaces_api', 'version': '1.25.1'},
  'workspaces_components': {
    'name': 'workspaces_components',
    'version': '1.23.0'
  },
  'workspaces_frugal': {'name': 'workspaces_frugal', 'version': '12.4.2'},
  'wuri_sdk': {'name': 'wuri_sdk', 'version': '0.5.4'},
  'xbrl_config_api': {'name': 'xbrl_config_api', 'version': '2.0.0'},
  'xbrl_importer_api': {'name': 'xbrl_importer_api', 'version': '1.2.0'},
  'xbrl_module': {'name': 'xbrl_module', 'version': '1.1.17'},
  'xbrl_orchestrator_api': {
    'name': 'xbrl_orchestrator_api',
    'version': '3.0.0'
  },
  'xbrl2_server_api': {'name': 'xbrl2_server_api', 'version': '9.4.0'},
};

final _public = {
  'analyzer': {'name': 'analyzer', 'version': '0.30.0+4'},
  'ansicolor': {'name': 'ansicolor', 'version': '0.0.9'},
  'archive': {'name': 'archive', 'version': '1.0.33'},
  'args': {'name': 'args', 'version': '1.4.4'},
  'async': {'name': 'async', 'version': '1.13.3'},
  'barback': {'name': 'barback', 'version': '0.15.2+14'},
  'boolean_selector': {'name': 'boolean_selector', 'version': '1.0.3'},
  'browser': {'name': 'browser', 'version': '0.10.0+3'},
  'build': {'name': 'build', 'version': '0.11.2'},
  'build_barback': {'name': 'build_barback', 'version': '0.4.0+2'},
  'build_config': {'name': 'build_config', 'version': '0.2.5'},
  'build_runner': {'name': 'build_runner', 'version': '0.6.0+1'},
  'built_collection': {'name': 'built_collection', 'version': '3.0.5'},
  'built_redux': {'name': 'built_redux', 'version': '7.4.2'},
  'built_value': {'name': 'built_value', 'version': '4.6.1'},
  'built_value_generator': {
    'name': 'built_value_generator',
    'version': '4.6.1'
  },
  'charcode': {'name': 'charcode', 'version': '1.1.1'},
  'cli_util': {'name': 'cli_util', 'version': '0.1.3'},
  'code_transformers': {'name': 'code_transformers', 'version': '0.5.1+5'},
  'collection': {'name': 'collection', 'version': '1.14.6'},
  'color': {'name': 'color', 'version': '2.0.2'},
  'colorize': {'name': 'colorize', 'version': '0.1.2'},
  'convert': {'name': 'convert', 'version': '2.0.1'},
  'cookie': {'name': 'cookie', 'version': '0.0.4'},
  'coverage': {'name': 'coverage', 'version': '0.10.0'},
  'crc32': {'name': 'crc32', 'version': '0.1.6'},
  'crypto': {'name': 'crypto', 'version': '2.0.2+1'},
  'csslib': {'name': 'csslib', 'version': '0.14.3'},
  'csv': {'name': 'csv', 'version': '3.1.2'},
  'dart_dev': {
    'name': 'dart_dev',
    'version': '1.9.6',
    'isPublicWorkivaPackage': true
  },
  'dart_style': {'name': 'dart_style', 'version': '1.0.9+1'},
  'dart_to_js_script_rewriter': {
    'name': 'dart_to_js_script_rewriter',
    'version': '1.0.3',
    'isPublicWorkivaPackage': true
  },
  'dart2_constant': {'name': 'dart2_constant', 'version': '1.0.1+dart1'},
  'dependency_validator': {
    'name': 'dependency_validator',
    'version': '1.1.2',
    'isPublicWorkivaPackage': true
  },
  'dnd': {'name': 'dnd', 'version': '0.4.0'},
  'faker': {'name': 'faker', 'version': '0.0.5'},
  'fixnum': {'name': 'fixnum', 'version': '0.10.7'},
  'fluri': {
    'name': 'fluri',
    'version': '1.2.4',
    'isPublicWorkivaPackage': true
  },
  'font_face_observer': {
    'name': 'font_face_observer',
    'version': '2.0.8',
    'isPublicWorkivaPackage': true
  },
  'front_end': {'name': 'front_end', 'version': '0.1.0-alpha.4.1'},
  'func': {'name': 'func', 'version': '1.0.0'},
  'glob': {'name': 'glob', 'version': '1.1.5'},
  'html': {'name': 'html', 'version': '0.13.3'},
  'http': {'name': 'http', 'version': '0.11.3+16'},
  'http_multi_server': {'name': 'http_multi_server', 'version': '2.0.4'},
  'http_parser': {'name': 'http_parser', 'version': '3.1.2'},
  'image': {'name': 'image', 'version': '1.1.33'},
  'intl': {'name': 'intl', 'version': '0.15.6'},
  'io': {'name': 'io', 'version': '0.3.2+1'},
  'isolate': {'name': 'isolate', 'version': '1.1.0'},
  'js': {'name': 'js', 'version': '0.6.1+1'},
  'json_annotation': {'name': 'json_annotation', 'version': '0.2.4'},
  'json_rpc_2': {'name': 'json_rpc_2', 'version': '2.0.7'},
  'kernel': {'name': 'kernel', 'version': '0.3.0-alpha.1.1'},
  'logging': {'name': 'logging', 'version': '0.11.3+2'},
  'markdown': {'name': 'markdown', 'version': '0.11.4'},
  'matcher': {'name': 'matcher', 'version': '0.12.1+4'},
  'memoize': {'name': 'memoize', 'version': '1.4.0'},
  'meta': {'name': 'meta', 'version': '1.1.6'},
  'mime': {'name': 'mime', 'version': '0.9.5'},
  'mockable_filesystem': {'name': 'mockable_filesystem', 'version': '0.0.3'},
  'mockito': {'name': 'mockito', 'version': '2.2.2'},
  'multi_server_socket': {'name': 'multi_server_socket', 'version': '1.0.1'},
  'node_preamble': {'name': 'node_preamble', 'version': '1.4.2'},
  'opentracing': {'name': 'opentracing', 'version': '0.2.3'},
  'over_react': {
    'name': 'over_react',
    'version': '1.29.0',
    'isPublicWorkivaPackage': true
  },
  'over_react_test': {
    'name': 'over_react_test',
    'version': '1.4.0',
    'isPublicWorkivaPackage': true
  },
  'package_config': {'name': 'package_config', 'version': '1.0.3'},
  'package_resolver': {'name': 'package_resolver', 'version': '1.0.2'},
  'path': {'name': 'path', 'version': '1.5.1'},
  'pdfjs': {
    'name': 'pdfjs',
    'version': '1.10.90+3',
    'isPublicWorkivaPackage': true
  },
  'petitparser': {'name': 'petitparser', 'version': '1.7.6'},
  'platform_detect': {
    'name': 'platform_detect',
    'version': '1.3.5',
    'isPublicWorkivaPackage': true
  },
  'plugin': {'name': 'plugin', 'version': '0.2.0+2'},
  'pool': {'name': 'pool', 'version': '1.3.4'},
  'protobuf': {'name': 'protobuf', 'version': '0.5.5'},
  'pub_semver': {'name': 'pub_semver', 'version': '1.4.1'},
  'quiver': {'name': 'quiver', 'version': '0.25.0'},
  'quiver_hashcode': {'name': 'quiver_hashcode', 'version': '1.0.0'},
  'r_tree': {
    'name': 'r_tree',
    'version': '1.0.3',
    'isPublicWorkivaPackage': true
  },
  'react': {'name': 'react', 'version': '4.4.2'},
  'redux': {'name': 'redux', 'version': '2.1.1'},
  'redux_logging': {'name': 'redux_logging', 'version': '0.1.4'},
  'resource': {'name': 'resource', 'version': '2.1.2'},
  'rxdart': {'name': 'rxdart', 'version': '0.14.0+2'},
  'sass': {'name': 'sass', 'version': '1.1.1'},
  'sass_builder': {'name': 'sass_builder', 'version': '1.2.0'},
  'scratch_space': {'name': 'scratch_space', 'version': '0.0.1+3'},
  'shelf': {'name': 'shelf', 'version': '0.7.3'},
  'shelf_packages_handler': {
    'name': 'shelf_packages_handler',
    'version': '1.0.3'
  },
  'shelf_proxy': {'name': 'shelf_proxy', 'version': '0.1.0+4'},
  'shelf_static': {'name': 'shelf_static', 'version': '0.2.7'},
  'shelf_web_socket': {'name': 'shelf_web_socket', 'version': '0.2.2'},
  'sockjs_client_wrapper': {
    'name': 'sockjs_client_wrapper',
    'version': '1.0.7',
    'isPublicWorkivaPackage': true
  },
  'source_gen': {'name': 'source_gen', 'version': '0.7.4+3'},
  'source_map_stack_trace': {
    'name': 'source_map_stack_trace',
    'version': '1.1.4'
  },
  'source_maps': {'name': 'source_maps', 'version': '0.10.5'},
  'source_span': {'name': 'source_span', 'version': '1.4.1'},
  'stack_trace': {'name': 'stack_trace', 'version': '1.9.3'},
  'state_machine': {
    'name': 'state_machine',
    'version': '2.0.2',
    'isPublicWorkivaPackage': true
  },
  'stream_channel': {'name': 'stream_channel', 'version': '1.6.6'},
  'stream_transform': {'name': 'stream_transform', 'version': '0.0.9'},
  'string_scanner': {'name': 'string_scanner', 'version': '1.0.2'},
  'supports_color': {'name': 'supports_color', 'version': '0.1.1'},
  'synchronized': {'name': 'synchronized', 'version': '1.5.0+1'},
  'term_glyph': {'name': 'term_glyph', 'version': '1.0.0'},
  'test': {'name': 'test', 'version': '0.12.34'},
  'transformer_utils': {
    'name': 'transformer_utils',
    'version': '0.1.5',
    'isPublicWorkivaPackage': true
  },
  'tuple': {'name': 'tuple', 'version': '1.0.2'},
  'typed_data': {'name': 'typed_data', 'version': '1.1.5'},
  'unittest': {'name': 'unittest', 'version': '0.11.7'},
  'utf': {'name': 'utf', 'version': '0.9.0+3'},
  'uuid': {'name': 'uuid', 'version': '0.5.3'},
  'vm_service_client': {'name': 'vm_service_client', 'version': '0.2.4'},
  'w_common': {
    'name': 'w_common',
    'version': '1.15.0',
    'isPublicWorkivaPackage': true
  },
  'w_flux': {
    'name': 'w_flux',
    'version': '2.10.1',
    'isPublicWorkivaPackage': true
  },
  'w_module': {
    'name': 'w_module',
    'version': '1.6.2',
    'isPublicWorkivaPackage': true
  },
  'w_transport': {
    'name': 'w_transport',
    'version': '3.2.8',
    'isPublicWorkivaPackage': true
  },
  'watcher': {'name': 'watcher', 'version': '0.9.7+6'},
  'web_socket_channel': {'name': 'web_socket_channel', 'version': '1.0.6'},
  'webdriver': {'name': 'webdriver', 'version': '1.2.3'},
  'when': {'name': 'when', 'version': '0.2.0'},
  'which': {'name': 'which', 'version': '0.1.3'},
  'xml': {'name': 'xml', 'version': '2.6.0'},
  'yaml': {'name': 'yaml', 'version': '2.1.13'},
};
/**
 * end of pub deps -s compact pull.
*/

final _deprecated = [
  'barback',
  'browser',
  'build_barback',
  'code_transformers',
  'dart_to_js_script_rewriter',
  'transformer_utils',
];

/**
 * Last pulled via https://datastudio.google.com/reporting/17zuxuZgMWxYqGwKS7UQAFr83tf9wShWJ/page/RDCa: 10/31/2018.
 * This is the only [Map] that will need to be consistently updated as repos
 * are updated to support Dart2.
*/
final _internalDart2CompatibilePackages = {
  'browser_storage': {
    'dart2PullRequestUri': 'https://github.com/Workiva/browser-storage/pull/30'
  },
  'dart_dev': {
    'dart2PullRequestUri': 'https://github.com/Workiva/dart_dev/pull/274'
  },
  'dependency_validator': {
    'dart2PullRequestUri':
        'https://github.com/Workiva/dependency_validator/pull/42'
  },
  'fluri': {'dart2PullRequestUri': 'https://github.com/Workiva/fluri/pull/74'},
  'platform_detect': {
    'dart2PullRequestUri': 'https://github.com/Workiva/platform_detect/pull/34'
  },
  'sockjs_client': {
    'dart2PullRequestUri':
        'https://github.com/Workiva/sockjs-dart-client/pull/20'
  },
  'sockjs_client_wrapper': {
    'dart2PullRequestUri':
        'https://github.com/Workiva/sockjs_client_wrapper/pull/14',
  },
  'state_machine': {
    'dart2PullRequestUri': 'https://github.com/Workiva/state_machine/pull/47',
  },
  'w_common': {
    'dart2PullRequestUri': 'https://github.com/Workiva/w_common/pull/98',
  },
  'w_flux': {
    'dart2PullRequestUri': 'https://github.com/Workiva/w_flux/pull/123',
  },
  'w_transport': {
    'dart2PullRequestUri': 'https://github.com/Workiva/w_transport/pull/320',
  },
  'opentracing_dart': {
    'dart2PullRequestUri':
        'https://github.com/Workiva/opentracing_dart/pull/27',
  },
  'font_face_observer': {
    'dart2PullRequestUri':
        'https://github.com/Workiva/font_face_observer/pull/38',
  },
  'sw_toolbox_dart': {
    'dart2PullRequestUri': 'https://github.com/Workiva/sw_toolbox_dart/pull/5',
  },
};

_mergePackageConfigs(Map packages) {
  final packageMap = new Map.from(packages);

  _internalDart2CompatibilePackages.forEach((packageName, packageConfig) {
    if (packageMap.containsKey(packageName)) {
      packageMap[packageName] = new Map.from(packageMap[packageName])
        ..addAll(packageConfig);
    }
  });

  return packageMap;
}

_removeDeprecatedPackages(Map packages) {
  final packageMap = new Map.from(packages);

  _deprecated.forEach((packageName) => packageMap.remove(packageName));

  return packageMap;
}

_removeInternalDart2CompatibilePackages(Map packages) {
  final packageMap = new Map.from(packages);

  _internalDart2CompatibilePackages
      .forEach((packageName, _) => packageMap.remove(packageName));

  return packageMap;
}

getWdeskDependencies({withDeprecated: true}) {
  final wdeskDependencies =
      getPublicWdeskDependencies(withDeprecated: withDeprecated);
  final wdeskPrivateDependencies =
      getPrivateWdeskDependencies(withDeprecated: withDeprecated);
  wdeskDependencies.addAll(wdeskPrivateDependencies);

  return wdeskDependencies;
}

getPublicWdeskDependencies({withDeprecated: true}) {
  return _mergePackageConfigs(
      (withDeprecated) ? _public : _removeDeprecatedPackages(_public));
}

getPrivateWdeskDependencies({withDeprecated: true}) {
  return _mergePackageConfigs(
      (withDeprecated) ? _private : _removeDeprecatedPackages(_private));
}

getInternalWdeskDependencies(
    {withDeprecated: true, withInternalDart2CompatibilePackages: true}) {
  final publicWdeskDependencies =
      getPublicWdeskDependencies(withDeprecated: withDeprecated);
  final internalWdeskDependencies = new Map();

  publicWdeskDependencies.forEach((packageName, packageConfig) {
    if (packageConfig['isPublicWorkivaPackage'] != null &&
        packageConfig['isPublicWorkivaPackage'])
      internalWdeskDependencies[packageName] = packageConfig;
  });

  internalWdeskDependencies
      .addAll(getPrivateWdeskDependencies(withDeprecated: withDeprecated));

  return (withInternalDart2CompatibilePackages)
      ? internalWdeskDependencies
      : _removeInternalDart2CompatibilePackages(
          getPrivateWdeskDependencies(withDeprecated: withDeprecated));
}
