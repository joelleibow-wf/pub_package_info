/**
 * Last pulled via pub deps -s compact from the Wdesk repo on 11/04/2018.
*/
final _private = {
  'admin_client': {
    'name': 'admin_client',
  },
  'admin_frugal': {
    'name': 'admin_frugal',
  },
  'app_intelligence': {
    'name': 'app_intelligence',
  },
  'audit': {
    'name': 'audit',
  },
  'basictracer_dart': {
    'name': 'basictracer_dart',
  },
  'bigsky_rest_files': {
    'name': 'bigsky_rest_files',
  },
  'bigsky_webdriver_utils': {
    'name': 'bigsky_webdriver_utils',
  },
  'browser_storage': {
    'name': 'browser_storage',
    'repository': 'https://github.com/Workiva/browser-storage'
  },
  'charts': {
    'name': 'charts',
  },
  'comments_frugal': {
    'name': 'comments_frugal',
  },
  'content_search_frugal': {
    'name': 'content_search_frugal',
  },
  'copy_frugal': {
    'name': 'copy_frugal',
  },
  'copy_ui': {
    'name': 'copy_ui',
  },
  'dart_medic': {
    'name': 'dart_medic',
  },
  'dart_permissions_editor': {
    'name': 'dart_permissions_editor',
  },
  'dataset_service_api': {
    'name': 'dataset_service_api',
  },
  'dataset_service_ui': {
    'name': 'dataset_service_ui',
  },
  'datatables': {
    'name': 'datatables',
  },
  'docmodel_frugal': {
    'name': 'docmodel_frugal',
  },
  'drawing': {
    'name': 'drawing',
  },
  'fastpath_api': {
    'name': 'fastpath_api',
  },
  'file_services_sdk': {
    'name': 'file_services_sdk',
  },
  'filing_orchestrator_api': {
    'name': 'filing_orchestrator_api',
  },
  'focus': {
    'name': 'focus',
  },
  'frugal': {
    'name': 'frugal',
    'repository': 'https://github.com/Workiva/frugal'
  },
  'graph_api': {
    'name': 'graph_api',
  },
  'graph_form_api': {
    'name': 'graph_form_api',
  },
  'graph_ui': {
    'name': 'graph_ui',
  },
  'grc_services_frugal': {
    'name': 'grc_services_frugal',
  },
  'history_frugal': {
    'name': 'history_frugal',
  },
  'home': {
    'name': 'home',
  },
  'home_frugal': {
    'name': 'home_frugal',
  },
  'iam_landing_page': {
    'name': 'iam_landing_page',
  },
  'key_binder': {
    'name': 'key_binder',
  },
  'licensing_api': {
    'name': 'licensing_api',
  },
  'licensing_frugal': {
    'name': 'licensing_frugal',
  },
  'linking_frugal': {
    'name': 'linking_frugal',
  },
  'linking_sdk': {
    'name': 'linking_sdk',
  },
  'markup': {
    'name': 'markup',
  },
  'messaging_sdk': {
    'name': 'messaging_sdk',
    'repository': 'https://github.com/Workiva/messaging-sdk'
  },
  'opentracing_dart': {
    'name': 'opentracing_dart',
  },
  'proofread_frugal': {
    'name': 'proofread_frugal',
  },
  'rcal_api': {
    'name': 'rcal_api',
  },
  'review_bar': {
    'name': 'review_bar',
  },
  'semver_audit': {
    'name': 'semver_audit',
  },
  'skaardb': {
    'name': 'skaardb',
  },
  'sockjs_client': {
    'name': 'sockjs_client',
    'isGitDependency': true,
    'repository': 'https://github.com/Workiva/sockjs-dart-client',
  },
  'speedparser': {
    'name': 'speedparser',
  },
  'sw_toolbox_dart': {
    'name': 'sw_toolbox_dart',
  },
  'tasker': {
    'name': 'tasker',
  },
  'text_doc_client': {
    'name': 'text_doc_client',
  },
  'thrift': {
    'name': 'thrift',
  },
  'toolbars': {
    'name': 'toolbars',
  },
  'tour': {
    'name': 'tour',
  },
  'truss': {
    'name': 'truss',
  },
  'undo_redo': {
    'name': 'undo_redo',
  },
  'user_analytics': {
    'name': 'user_analytics',
  },
  'vessel': {
    'name': 'vessel',
  },
  'w_attachments': {
    'name': 'w_attachments',
  },
  'w_clipboard': {
    'name': 'w_clipboard',
  },
  'w_comments': {
    'name': 'w_comments',
  },
  'w_context_menu': {
    'name': 'w_context_menu',
  },
  'w_dashboard_frugal': {
    'name': 'w_dashboard_frugal',
  },
  'w_dashboard': {
    'name': 'w_dashboard',
  },
  'w_editor_dev_tools': {
    'name': 'w_editor_dev_tools',
  },
  'w_editor_properties': {
    'name': 'w_editor_properties',
  },
  'w_filing_api': {
    'name': 'w_filing_api',
  },
  'w_filing': {
    'name': 'w_filing',
  },
  'w_graph_client': {
    'name': 'w_graph_client',
  },
  'w_history': {
    'name': 'w_history',
  },
  'w_input_validation': {
    'name': 'w_input_validation',
  },
  'w_link_properties_ui': {
    'name': 'w_link_properties_ui',
  },
  'w_oauth2': {
    'name': 'w_oauth2',
  },
  'w_outline': {
    'name': 'w_outline',
  },
  'w_project': {
    'name': 'w_project',
  },
  'w_router': {
    'name': 'w_router',
  },
  'w_session': {
    'name': 'w_session',
  },
  'w_sox': {
    'name': 'w_sox',
  },
  'w_table': {
    'name': 'w_table',
  },
  'w_test_tools': {
    'name': 'w_test_tools',
  },
  'w_translate': {
    'name': 'w_translate',
  },
  'w_user_color_module': {
    'name': 'w_user_color_module',
  },
  'w_viewer': {
    'name': 'w_viewer',
  },
  'w_virtual_components': {
    'name': 'w_virtual_components',
  },
  'w_webdriver_utils': {
    'name': 'w_webdriver_utils',
  },
  'wContent_frugal': {
    'name': 'wContent_frugal',
  },
  'wdesk_login': {
    'name': 'wdesk_login',
    'repository': 'https://github.com/Workiva/wdesk_login'
  },
  'wdesk_sdk': {
    'name': 'wdesk_sdk',
  },
  'web_skin_dart': {
    'name': 'web_skin_dart',
  },
  'web_skin': {
    'name': 'web_skin',
  },
  'workflow_client': {
    'name': 'workflow_client',
  },
  'workflow_frugal': {
    'name': 'workflow_frugal',
  },
  'workiva_scripts': {
    'name': 'workiva_scripts',
  },
  'workspaces_api': {
    'name': 'workspaces_api',
  },
  'workspaces_components': {
    'name': 'workspaces_components',
  },
  'workspaces_frugal': {
    'name': 'workspaces_frugal',
  },
  'wuri_sdk': {
    'name': 'wuri_sdk',
  },
  'xbrl_config_api': {
    'name': 'xbrl_config_api',
  },
  'xbrl_importer_api': {
    'name': 'xbrl_importer_api',
  },
  'xbrl_module': {
    'name': 'xbrl_module',
  },
  'xbrl_orchestrator_api': {
    'name': 'xbrl_orchestrator_api',
  },
  'xbrl2_server_api': {
    'name': 'xbrl2_server_api',
  },
};

final _public = {
  'analyzer': {
    'name': 'analyzer',
  },
  'ansicolor': {
    'name': 'ansicolor',
  },
  'archive': {
    'name': 'archive',
  },
  'args': {
    'name': 'args',
  },
  'async': {
    'name': 'async',
  },
  'barback': {
    'name': 'barback',
  },
  'boolean_selector': {
    'name': 'boolean_selector',
  },
  'browser': {
    'name': 'browser',
  },
  'build_barback': {
    'name': 'build_barback',
  },
  'build_config': {
    'name': 'build_config',
  },
  'build_runner': {
    'name': 'build_runner',
  },
  'build': {
    'name': 'build',
  },
  'built_collection': {
    'name': 'built_collection',
  },
  'built_redux': {
    'name': 'built_redux',
  },
  'built_value_generator': {
    'name': 'built_value_generator',
  },
  'built_value': {
    'name': 'built_value',
  },
  'charcode': {
    'name': 'charcode',
  },
  'cli_util': {
    'name': 'cli_util',
  },
  'code_transformers': {
    'name': 'code_transformers',
  },
  'collection': {
    'name': 'collection',
  },
  'color': {
    'name': 'color',
  },
  'colorize': {
    'name': 'colorize',
  },
  'convert': {
    'name': 'convert',
  },
  'cookie': {
    'name': 'cookie',
  },
  'coverage': {
    'name': 'coverage',
  },
  'crc32': {
    'name': 'crc32',
  },
  'crypto': {
    'name': 'crypto',
  },
  'csslib': {
    'name': 'csslib',
  },
  'csv': {
    'name': 'csv',
  },
  'dart_dev': {'name': 'dart_dev', 'isPublicWorkivaPackage': true},
  'dart_style': {
    'name': 'dart_style',
  },
  'dart_to_js_script_rewriter': {
    'name': 'dart_to_js_script_rewriter',
    'isPublicWorkivaPackage': true
  },
  'dart2_constant': {
    'name': 'dart2_constant',
  },
  'dependency_validator': {
    'name': 'dependency_validator',
    'isPublicWorkivaPackage': true
  },
  'dnd': {
    'name': 'dnd',
  },
  'faker': {
    'name': 'faker',
  },
  'fixnum': {
    'name': 'fixnum',
  },
  'fluri': {'name': 'fluri', 'isPublicWorkivaPackage': true},
  'font_face_observer': {
    'name': 'font_face_observer',
    'isPublicWorkivaPackage': true
  },
  'front_end': {
    'name': 'front_end',
  },
  'func': {
    'name': 'func',
  },
  'glob': {
    'name': 'glob',
  },
  'highcharts': {
    'name': 'highcharts',
  },
  'html': {
    'name': 'html',
  },
  'http_multi_server': {
    'name': 'http_multi_server',
  },
  'http_parser': {
    'name': 'http_parser',
  },
  'http': {
    'name': 'http',
  },
  'image': {
    'name': 'image',
  },
  'intl': {
    'name': 'intl',
  },
  'io': {
    'name': 'io',
  },
  'isolate': {
    'name': 'isolate',
  },
  'js': {
    'name': 'js',
  },
  'json_annotation': {
    'name': 'json_annotation',
  },
  'json_rpc_2': {
    'name': 'json_rpc_2',
  },
  'kernel': {
    'name': 'kernel',
  },
  'logging': {
    'name': 'logging',
  },
  'markdown': {
    'name': 'markdown',
  },
  'matcher': {
    'name': 'matcher',
  },
  'memoize': {
    'name': 'memoize',
  },
  'meta': {
    'name': 'meta',
  },
  'mime': {
    'name': 'mime',
  },
  'mockable_filesystem': {
    'name': 'mockable_filesystem',
  },
  'mockito': {
    'name': 'mockito',
  },
  'multi_server_socket': {
    'name': 'multi_server_socket',
  },
  'node_preamble': {
    'name': 'node_preamble',
  },
  'opentracing': {
    'name': 'opentracing',
  },
  'over_react_test': {
    'name': 'over_react_test',
    'isPublicWorkivaPackage': true
  },
  'over_react': {'name': 'over_react', 'isPublicWorkivaPackage': true},
  'package_config': {
    'name': 'package_config',
  },
  'package_resolver': {
    'name': 'package_resolver',
  },
  'path': {
    'name': 'path',
  },
  'pdfjs': {'name': 'pdfjs', 'isPublicWorkivaPackage': true},
  'petitparser': {
    'name': 'petitparser',
  },
  'platform_detect': {
    'name': 'platform_detect',
    'isPublicWorkivaPackage': true
  },
  'plugin': {
    'name': 'plugin',
  },
  'pool': {
    'name': 'pool',
  },
  'protobuf': {
    'name': 'protobuf',
  },
  'pub_semver': {
    'name': 'pub_semver',
  },
  'quiver_hashcode': {
    'name': 'quiver_hashcode',
  },
  'quiver': {
    'name': 'quiver',
  },
  'r_tree': {'name': 'r_tree', 'isPublicWorkivaPackage': true},
  'react': {
    'name': 'react',
  },
  'redux_logging': {
    'name': 'redux_logging',
  },
  'redux': {
    'name': 'redux',
  },
  'resource': {
    'name': 'resource',
  },
  'rxdart': {
    'name': 'rxdart',
  },
  'sass_builder': {
    'name': 'sass_builder',
  },
  'sass': {
    'name': 'sass',
  },
  'scratch_space': {
    'name': 'scratch_space',
  },
  'shelf_packages_handler': {
    'name': 'shelf_packages_handler',
  },
  'shelf_proxy': {
    'name': 'shelf_proxy',
  },
  'shelf_static': {
    'name': 'shelf_static',
  },
  'shelf_web_socket': {
    'name': 'shelf_web_socket',
  },
  'shelf': {
    'name': 'shelf',
  },
  'sockjs_client_wrapper': {
    'name': 'sockjs_client_wrapper',
    'isPublicWorkivaPackage': true
  },
  'source_gen': {
    'name': 'source_gen',
  },
  'source_map_stack_trace': {
    'name': 'source_map_stack_trace',
  },
  'source_maps': {
    'name': 'source_maps',
  },
  'source_span': {
    'name': 'source_span',
  },
  'stack_trace': {
    'name': 'stack_trace',
  },
  'state_machine': {'name': 'state_machine', 'isPublicWorkivaPackage': true},
  'stream_channel': {
    'name': 'stream_channel',
  },
  'stream_transform': {
    'name': 'stream_transform',
  },
  'string_scanner': {
    'name': 'string_scanner',
  },
  'supports_color': {
    'name': 'supports_color',
  },
  'synchronized': {
    'name': 'synchronized',
  },
  'term_glyph': {
    'name': 'term_glyph',
  },
  'test': {
    'name': 'test',
  },
  'transformer_utils': {
    'name': 'transformer_utils',
    'isPublicWorkivaPackage': true
  },
  'tuple': {
    'name': 'tuple',
  },
  'typed_data': {
    'name': 'typed_data',
  },
  'unittest': {
    'name': 'unittest',
  },
  'unscripted': {
    'name': 'unscripted',
  },
  'utf': {
    'name': 'utf',
  },
  'uuid': {
    'name': 'uuid',
  },
  'vm_service_client': {
    'name': 'vm_service_client',
  },
  'w_common': {'name': 'w_common', 'isPublicWorkivaPackage': true},
  'w_flux': {'name': 'w_flux', 'isPublicWorkivaPackage': true},
  'w_module': {'name': 'w_module', 'isPublicWorkivaPackage': true},
  'w_transport': {'name': 'w_transport', 'isPublicWorkivaPackage': true},
  'watcher': {
    'name': 'watcher',
  },
  'web_socket_channel': {
    'name': 'web_socket_channel',
  },
  'webdriver': {
    'name': 'webdriver',
  },
  'when': {
    'name': 'when',
  },
  'which': {
    'name': 'which',
  },
  'xml': {
    'name': 'xml',
  },
  'yaml': {
    'name': 'yaml',
  },
};
/**
 * end of pub deps -s compact pull.
*/

final _deprecated = [
  'barback',
  'browser',
  'code_transformers',
  'dart_to_js_script_rewriter',
  'build_barback',
];

// Last pulled via https://datastudio.google.com/reporting/17zuxuZgMWxYqGwKS7UQAFr83tf9wShWJ/page/RDCa 10/31/2018.
final _internalDart2CompatibilePackages = {
  'browser_storage': {
    'dart2PullRequestUri': 'https://github.com/Workiva/browser-storage/pull/30'
  },
  'dart_dev': {
    'dart2PullRequestUri': 'https://github.com/Workiva/dart_dev/pull/274'
  },
  'dependency_validator': {
    'dart2PullRequestUri':
        'https://github.com/Workiva/dependency_validator/pull/42'
  },
  'fluri': {'dart2PullRequestUri': 'https://github.com/Workiva/fluri/pull/74'},
  'platform_detect': {
    'dart2PullRequestUri': 'https://github.com/Workiva/platform_detect/pull/34'
  },
  'sockjs_client': {
    'dart2PullRequestUri':
        'https://github.com/Workiva/sockjs-dart-client/pull/20'
  },
  'sockjs_client_wrapper': {
    'dart2PullRequestUri':
        'https://github.com/Workiva/sockjs_client_wrapper/pull/14',
  },
  'state_machine': {
    'dart2PullRequestUri': 'https://github.com/Workiva/state_machine/pull/47',
  },
  'w_common': {
    'dart2PullRequestUri': 'https://github.com/Workiva/w_common/pull/98',
  },
  'w_flux': {
    'dart2PullRequestUri': 'https://github.com/Workiva/w_flux/pull/123',
  },
  'w_transport': {
    'dart2PullRequestUri': 'https://github.com/Workiva/w_transport/pull/320',
  },
  'opentracing_dart': {
    'dart2PullRequestUri':
        'https://github.com/Workiva/opentracing_dart/pull/27',
  },
  'font_face_observer': {
    'dart2PullRequestUri':
        'https://github.com/Workiva/font_face_observer/pull/38',
  },
  'sw_toolbox_dart': {
    'dart2PullRequestUri': 'https://github.com/Workiva/sw_toolbox_dart/pull/5',
  },
};

_mergePackageConfigs(Map packages) {
  final packageMap = new Map.from(packages);

  _internalDart2CompatibilePackages.forEach((packageName, packageConfig) {
    if (packageMap.containsKey(packageName)) {
      packageMap[packageName] = new Map.from(packageMap[packageName])
        ..addAll(packageConfig);
    }
  });

  return packageMap;
}

_removeDeprecatedPackages(Map packages) {
  final packageMap = new Map.from(packages);

  _deprecated.forEach((packageName) => packageMap.remove(packageName));

  return packageMap;
}

_removeInternalDart2CompatibilePackages(Map packages) {
  final packageMap = new Map.from(packages);

  _internalDart2CompatibilePackages
      .forEach((packageName, _) => packageMap.remove(packageName));

  return packageMap;
}

getWdeskDependencies({withDeprecated: true}) {
  final wdeskDependencies =
      getPublicWdeskDependencies(withDeprecated: withDeprecated);
  final wdeskPrivateDependencies =
      getPrivateWdeskDependencies(withDeprecated: withDeprecated);
  wdeskDependencies.addAll(wdeskPrivateDependencies);

  return wdeskDependencies;
}

getPublicWdeskDependencies({withDeprecated: true}) {
  return _mergePackageConfigs(
      (withDeprecated) ? _public : _removeDeprecatedPackages(_public));
}

getPrivateWdeskDependencies({withDeprecated: true}) {
  return _mergePackageConfigs(
      (withDeprecated) ? _private : _removeDeprecatedPackages(_private));
}

getInternalWdeskDependencies(
    {withDeprecated: true, withInternalDart2CompatibilePackages: true}) {
  final publicWdeskDependencies =
      getPublicWdeskDependencies(withDeprecated: withDeprecated);
  final internalWdeskDependencies = new Map();

  publicWdeskDependencies.forEach((packageName, packageConfig) {
    if (packageConfig['isPublicWorkivaPackage'] != null &&
        packageConfig['isPublicWorkivaPackage'])
      internalWdeskDependencies[packageName] = packageConfig;
  });

  internalWdeskDependencies
      .addAll(getPrivateWdeskDependencies(withDeprecated: withDeprecated));

  return (withInternalDart2CompatibilePackages)
      ? internalWdeskDependencies
      : _removeInternalDart2CompatibilePackages(
          getPrivateWdeskDependencies(withDeprecated: withDeprecated));
}
